<!DOCTYPE html>
<html lang="en">
<head>
    <title>OKB - Event</title>

    <meta charset="utf8">
    <meta name="author" content="Alex Baier">

    <link rel="stylesheet" href="resources/css/style.css" />

    <script src="thirdparty/js/mustache.min.js"></script>
    <script src="thirdparty/js/jquery-3.0.0.min.js"></script>

    <script src="resources/js/usermanager.js"></script>
    <script src="resources/js/utility.js"></script>
    <script src="resources/js/config.js"></script>
    <script src="resources/js/wdapihandler.js"></script>
    <script src="resources/js/idlabelstore.js"></script>
    <script src="resources/js/wditemmapper.js"></script>
    <script src="resources/js/wditemprinter.js"></script>
    <script src="resources/js/eventpage.js"></script>
    <script src="resources/js/curation.js"></script>
    <script src="resources/js/curationform.js"></script>
</head>
<body onload="initUserManager(); init();">
    <header>
        <h1><img alt="OKB LOGO" src=""> This is a slogan about OKB and curation.</h1>
    </header>
    <nav>
        <a href="index.html">start</a> |
        <a href="selection.html">event selection</a> |
        <a href="leaderboard.html">leaderboard</a> |
        <div id="userlogin"></div>
        <script id="userLoginTemplate" type="x-tmpl-mustache">
            <input id="username" type="text" placeholder="username" />
            <input id="password" type="password" placeholder="password" />
            <button onclick="executeLogin();">Login</button>
        </script>
        <script id="userInfoTemplate" type="x-tmpl-mustache">
            {{username}} ({{reputation}})
            <span class="smalltext cancel" onClick="executeLogout();">logout</span>
        </script>
    </nav>
    <main>
        <div id="curation">
            <datalist id="propertyOptions">
            </datalist>
            <script id="propertyInputOptionsTemplate" type="x-tmpl-mustache">
                {{#options}}
                <option value="{{.}}" />
                {{/options}}
            </script>
            <div id="curationForm">
            </div>
            <div id="curatedClaims">
            </div>
            <script id="listCuratedClaimsTemplate" type="x-tmpl-mustache">
                <h4>user-curated claims</h4>
                    {{#claims}}
                        {{propertyName}}: {{value}} <br />
                        <em class="data smalltext">curated by {{user}}</em> <br/>
                        {{#claimType}}
                        <em class="data smalltext">relation to other claims: {{.}}</em> <br />
                        {{/claimType}}
                        <details>
                            <summary>qualifiers</summary>
                            {{#qualifiers}}
                                - {{.}} <br />
                            {{/qualifiers}}
                        </details>
                        <details>
                            <summary>reference</summary>
                            url: <a>{{source.url}}</a> <br />
                            publication: {{source.publicationDate}} <br />
                            retrieval: {{source.retrievalDate}} <br />
                            reliabilty: {{source.reliabilityRating}} <br />
                            neutrality: {{source.neutralityRating}} <br />
                            authors: {{#source.authors}}{{.}}.{{/source.authors}}
                        </details>
                    {{/claims}}
            </script>
            <script id="listCuratedClaimsSortedTemplate" type="x-tmpl-mustache">
                    <h4>statements in OKB</h4>
                    {{#statements}}
                        <div class="statement">
                            {{#labelIt}}{{propertyid}}{{/labelIt}} <br />
                            <ul>
                                {{#claims}}
                                    {{#preferred}}
                                    <li class="claim">
                                        {{value}} <emph class="preferred">preferred</emph> <br />
                                        <details>
                                            <summary>qualifiers({{qualifiers.length}})</summary>
                                            {{#qualifiers}}
                                                - {{#labelIt}}{{propertyid}}{{/labelIt}}: {{value}} <br />
                                            {{/qualifiers}}
                                        </details>
                                        <details>
                                            {{#sources}}
                                                <summary>reference</summary>
                                                <div class="refdetails">
                                                url: <a href="{{url}}">{{url}}</a> <br />
                                                publication: {{publicationdate}} <br />
                                                retrieval: {{retrievaldate}} <br />
                                                reliabilty: {{#shorten}}{{trustrating}}{{/shorten}} <br />
                                                neutrality: {{#shorten}}{{neutralityrating}}{{/shorten}} <br />
                                                </div>
                                            {{/sources}}
                                        </details>
                                    </li>
                                    {{/preferred}}
                                    {{#normal}}
                                    <li class="claim">
                                        {{value}} <emph class="normal">normal</emph> <br />
                                        <details>
                                            <summary>qualifiers({{qualifiers.length}})</summary>
                                            {{#qualifiers}}
                                                - {{#labelIt}}{{propertyid}}{{/labelIt}}: {{value}} <br />
                                            {{/qualifiers}}
                                        </details>
                                        <details>
                                            {{#sources}}
                                                <summary>reference</summary>
                                                <div class="refdetails">
                                                url: <a href="{{url}}">{{url}}</a> <br />
                                                publication: {{publicationdate}} <br />
                                                retrieval: {{retrievaldate}} <br />
                                                reliabilty: {{#shorten}}{{trustrating}}{{/shorten}} <br />
                                                neutrality: {{#shorten}}{{neutralityrating}}{{/shorten}} <br />
                                                </div>
                                            {{/sources}}
                                        </details>
                                    </li class="claim">
                                    {{/normal}}
                                    {{#deprecated}}
                                    <li>
                                        {{value}} <emph class="deprecated">deprecated</emph> <br />
                                        <details>
                                            <summary>qualifiers({{qualifiers.length}})</summary>
                                            {{#qualifiers}}
                                                - {{#labelIt}}{{propertyid}}{{/labelIt}}: {{value}} <br />
                                            {{/qualifiers}}
                                        </details>
                                        <details>
                                            {{#sources}}
                                                <summary>reference</summary>
                                                <div class="refdetails">
                                                url: <a href="{{url}}">{{url}}</a> <br />
                                                publication: {{publicationdate}} <br />
                                                retrieval: {{retrievaldate}} <br />
                                                reliabilty: {{#shorten}}{{trustrating}}{{/shorten}} <br />
                                                neutrality: {{#shorten}}{{neutralityrating}}{{/shorten}} <br />
                                                </div>
                                            {{/sources}}
                                        </details>
                                    </li>
                                    {{/deprecated}}
                                    {{#unranked}}
                                    <li class="claim">
                                        {{value}} <emph class="unranked">unranked</emph>
                                        <details>
                                            <summary>qualifiers({{qualifiers.length}})</summary>
                                            {{#qualifiers}}
                                                - {{#labelIt}}{{propertyid}}{{/labelIt}}: {{value}} <br />
                                            {{/qualifiers}}
                                        </details>
                                        <details>
                                            {{#sources}}
                                                <summary>reference</summary>
                                                <div class="refdetails">
                                                url: <a href="{{url}}">{{url}}</a> <br />
                                                publication: {{publicationdate}} <br />
                                                retrieval: {{retrievaldate}} <br />
                                                reliabilty: {{#shorten}}{{trustrating}}{{/shorten}} <br />
                                                neutrality: {{#shorten}}{{neutralityrating}}{{/shorten}} <br />
                                                </div>
                                            {{/sources}}
                                        </details>
                                    </li>
                                    {{/unranked}}
                                {{/claims}}
                            </ul>
                        </div>
                    {{/statements}}
            </script>
        </div>
        <!-- Templates for the stages of claim curation -->
        <script id="startCurationTemplate" type="x-tmpl-mustache">
            <button onclick="processStartCurationForm()">create claim</button><br />
            <div id="suggestedProperties" class="radiolist">
                <input type="radio" name="property" value="null" checked="true">own choice</input> <br /> 
                <em class="instruction">missing properties</em>
                <div id="additionalSuggestedProperties">
                </div>
            </div>
        </script>
        <script id="additionalSuggestedPropertiesTemplate" type="x-tmpl-mustache">
            {{#properties}}
             <input type="radio" name="property" value="{{.}}">{{.}}</input><br />
            {{/properties}}
        </script>
        <script id="choosePropertyTemplate" type="x-tmpl-mustache">
            <em class="instruction">choose a property</em>
            <em class="cancel" onclick="resetCurationForm();">cancel</em>
            <div class="inputButtonPair">
                <input id="property" type="text" placeholder="property" list="propertyOptions" />
                <button onclick="processChoosePropertyForm();">go</button>
            </div>
        </script>
        <script id="enterValueTemplate" type="x-tmpl-mustache">
            <em class="instruction">enter a value</em>
            <em class="cancel" onclick="resetCurationForm();">cancel</em> <br />
            <em class="data">{{propertyName}}:</em>
            <div class="inputButtonPair">
                <input id="value" type="{{type}}" placeholder="value" />
                <button onclick="processEnterValueForm();">confirm</button>
            </div>
        </script>
        <script id="chooseClaimTypeTemplate" type="x-tmpl-mustache">
            <em class="data">{{propertyName}}: {{value}}</em>
            <em class="back" onclick="loadEnterValueForm(curatingData.propertyName);">back</em>
            <em class="cancel" onclick="resetCurationForm();">cancel</em> <br />
            <em class="instruction">there are other claims about "{{propertyName}}".</em> <br />
            <em class="instruction">how is your new claim related to them?</em> <br />
            <div class="centralized">
                <div class="radiolist">
                    <input type="radio" name="relation" value="collision" checked="true">collision</input>
                    <br />
                    <input type="radio" name="relation" value="opinion">another opinion</input>
                    <br />
                    <input type="radio" name="relation" value="recent">recent data</input>
                </div>
                <br />
                <details>
                    <summary>show related claims</summary>
                    {{#claims}}
                    - {{.}} <br />
                    {{/claims}}    
                </details>
                <button onclick="processChooseClaimTypeForm();">confirm</button>
            </div>
        </script>
        <script id="qualifiersToAddTemplate" type="x-tmpl-mustache">
            <em class="data">{{propertyName}}: {{value}}</em>
            <em class="back" onclick="loadChooseClaimTypeForm();">back</em>
            <em class="cancel" onclick="resetCurationForm();">cancel</em> <br />
            {{#claimType}}
                <em class="data smalltext">relation to other claims: {{.}}</em>
            {{/claimType}}
            <details>
                <summary>qualifiers</summary>
                {{#qualifiers}}
                    - {{.}} <br />
                {{/qualifiers}}
            </details>
            <em class="instruction">do you have any qualifiers to add?</em> <br />
            <button onclick="processQualifiersToAddForm(true);">yes</button>
            <button onclick="processQualifiersToAddForm(false);">no</button>
        </script>
        <script id="createSourceInformationTemplate" type="x-tmpl-mustache">
            <em class="data">{{propertyName}}: {{value}}</em>
            <em class="back" onclick="loadQualifiersToAddForm();">back</em>
            <em class="cancel" onclick="resetCurationForm();">cancel</em> <br />
            {{#claimType}}
                <em class="data smalltext">relation to other claims: {{.}}</em>
            {{/claimType}}
            <details>
                <summary>qualifiers</summary>
                {{#qualifiers}}
                    - {{.}} <br />
                {{/qualifiers}}
            </details>
            <em class="instruction">enter the url of the article</em>
            <br /> <input id="url" type="url" /> <br />
            <em class="instruction">how reliable is the information in your chosen article?<br />rate from 0% to 100%.</em> <br />
            <input id="reliabilityRating" type="range" step=1 min=0 max=100 onchange="$('#reliabilityValue').html(this.value);"/> 
            <em id="reliabilityValue" class="data">50</em><em class="data">%</em><br />
            <em class="instruction">how neutral is the article?<br />does it take a side or a certain political view?<br />rate from 0% to 100%.</em> <br />
            <input id="neutralityRating" type="range" step=1 min=0 max=100 onchange="$('#neutralityValue').html(this.value);"/>
            <em id="neutralityValue" class="data">50</em><em class="data">%</em><br />
            <em class="instruction">what else can you tell us about your source</em> <br />
            <label class="data">publication date: </label>
            <input id="pubdate" type="date" /> <br />
            <label class="data">retrieval date: </label>
            <input id="retdate" type="date" /> <br />
            <label class="data">authors: </label>
            <input id="authors" type="text" /> <br />
            <button onclick="processCreateSourceInformationForm();">confirm</button>
        </script>
        <script id="createQualifierTemplate" type="x-tmpl-mustache">
            <em class="data">{{propertyName}}: {{value}}</em>
            <em class="back" onclick="loadQualifiersToAddForm();">back</em>
            <em class="cancel" onclick="resetCurationForm();">cancel</em> <br />
            {{#claimType}}
                <em class="data smalltext">relation to other claims: {{.}}</em>
            {{/claimType}}
            <details>
                <summary>qualifiers</summary>
                {{#qualifiers}}
                    - {{.}} <br />
                {{/qualifiers}}
            </details>
            <em class="instruction">enter the property of your qualifier</em> <br />
            <input id="qualifierProperty" type="text" list="propertyOptions" onblur="setTypeOfQualifierValueInput(this.value);"/> <br />
            <em class="instruction">enter the value of your qualifier</em> <br />
            <input id="qualifierValue" type="text" />
            <button onclick="processCreateQualifierForm();">confirm</button>
        </script>
        <script id="showOverviewTemplate" type="x-tmpl-mustache">
            <em class="instruction">you are done.<br /> take a last look at your claim and submit it.</em>
            <br /><em class="data">{{propertyName}}: {{value}}</em>
            <em class="back" onclick="loadCreateSourceInformationForm();">back</em>
            <em class="cancel" onclick="resetCurationForm();">cancel</em> <br />
            {{#claimType}}
                <em class="data smalltext">relation to other claims: {{.}}</em>
            {{/claimType}}
            <details>
                <summary>qualifiers</summary>
                {{#qualifiers}}
                    - {{.}} <br />
                {{/qualifiers}}
            </details>
            <details>
                <summary>reference</summary>
                url: <a href="{{url}}">{{url}}</a><br />
                publication: {{pubdate}} <br />
                retrieval: {{retdate}} <br />
                reliability: {{reliability}} <br />
                neutrality: {{neutrality}} <br />
                authors: {{#authors}}{{.}}. {{/authors}}
            </details>
            <button onclick="processOverviewForm();">submit claim</button>
        </script>
        <div id="item">
        </div>
        <!-- Template for Item objects -->
        <script id="itemTemplate" type="x-tmpl-mustache">
            <h3>{{label}} ({{id}})</h3>
            <details>
                <summary>aliases, description</summary>
                <p>
                    {{#aliases}}
                        <span class="alias">{{.}}</span>
                    {{/aliases}}
                </p>
                <p>{{description}}</p>
            </details>

            <h4>statements in Wikidata:</h4>
            {{#statements}}
            <div class="statement">
                {{#labelIt}}{{propertyId}}{{/labelIt}}
                <ul>
                    {{#claims}}
                    <li class="claim">
                        {{#mainsnak.datavalue}}
                            {{.}}
                        {{/mainsnak.datavalue}}
                        {{^mainsnak.datavalue}}
                            no corresponding value
                        {{/mainsnak.datavalue}} 
                        <br />
                        <ul>
                            {{#qualifiers}}
                            <li class="qualifier">
                                {{#labelIt}}{{snak.propertyId}}{{/labelIt}}: {{snak.datavalue}}
                            </li>
                            {{/qualifiers}}
                        </ul>
                        <details>
                            <summary>
                                references ({{references.length}})
                            </summary>
                            <div class="refdetails">
                            <ul>
                                {{#references}}
                                <li class="reference">
                                    {{#snaks}}
                                    {{#labelIt}}{{propertyId}}{{/labelIt}}: {{datavalue}} 
                                    <br />
                                    {{/snaks}}
                                </li>
                                {{/references}}
                            </ul>
                            </div>
                        </details>
                    </li>
                    {{/claims}}
                </ul>
            </div>
            {{/statements}}
        </script>
    </main>
    <footer>
        <a href="about.html" hreflang="en">About</a>
        <a href="copyright.html" hreflang="en">Copyright</a>
        <a href="https://github.com/Institute-Web-Science-and-Technologies/OKB" hreflang="en">Code</a>
    </footer>
</body>
</html>